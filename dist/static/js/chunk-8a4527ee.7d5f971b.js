(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a4527ee"],{"13ad":function(t,e,n){},"54fb":function(t,e,n){"use strict";var r=n("13ad"),o=n.n(r);o.a},"71fa":function(t,e,n){"use strict";n.d(e,"h",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"i",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"j",(function(){return l})),n.d(e,"c",(function(){return m}));var r=n("b775");function o(t){return Object(r["a"])({url:"sofa?".concat(t),method:"get"})}function a(){return Object(r["a"])({url:"sofa/list",method:"get"})}function i(t){return Object(r["a"])({url:"sofa/".concat(t),method:"get"})}function c(t){return Object(r["a"])({url:"sofa",method:"post",data:t})}function s(t,e){return Object(r["a"])({url:"sofa/".concat(t),method:"post",data:e})}function u(t,e){return Object(r["a"])({url:"sofa/".concat(t,"/items?").concat(e),method:"get"})}function d(t,e){return Object(r["a"])({url:"sofa/".concat(t,"/items/").concat(e),method:"get"})}function f(t,e){return Object(r["a"])({url:"sofa/".concat(t,"/items"),method:"post",data:e})}function l(t,e,n){return Object(r["a"])({url:"sofa/".concat(t,"/items/").concat(e),method:"post",data:n})}function m(){return Object(r["a"])({url:"designs",method:"get"})}},c04c:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-collapse",[n("el-collapse-item",{attrs:{title:"订单信息",name:"1"}},[n("el-form",{attrs:{"auto-complete":"on","label-width":"120px"}},[n("el-form-item",{attrs:{label:"淘宝订单号",prop:"oid"}},[n("span",[t._v(t._s(t.order.oid))])]),t._v(" "),n("el-form-item",{attrs:{label:"收件人信息",prop:"recipient_information"}},[n("span",[t._v(t._s(t.order.recipient_information))])]),t._v(" "),n("el-form-item",{attrs:{label:"规格型号",prop:"sofa_cover_id"}},[n("span",[t._v(t._s(t.order.sofa.name))])]),t._v(" "),n("el-form-item",{attrs:{label:"材料选择",prop:"sofa_cover_item_id"}},[n("span",[t._v(t._s(t.order.sofa_item.chain_name))])]),t._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"note"}},[n("span",[t._v(t._s(t.order.note))])])],1)],1)],1),t._v(" "),n("h5",[t._v("定制规格")]),t._v(" "),n("el-tabs",{attrs:{lazy:!0,type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.designs,(function(e,r){return n("el-tab-pane",{attrs:{label:e.name,design:e,name:"index"+r}},[n("el-form",{ref:"form",refInFor:!0,attrs:{model:t.form,rule:t.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"规格名称"}},[n("span",[t._v(t._s(e.name))])]),t._v(" "),n("el-form-item",{attrs:{label:"示意图"}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.img,fit:"fill"}})],1),t._v(" "),t._l(e.types,(function(e){return n("el-form-item",{attrs:{label:e}},[t.order.confirmed_at?n("span",[t._v(t._s(t.form.lengths[e]))]):n("el-input",{attrs:{placeholder:"单位：cm"},model:{value:t.form.lengths[e],callback:function(n){t.$set(t.form.lengths,e,n)},expression:"form.lengths[type]"}})],1)})),t._v(" "),n("el-form-item",{attrs:{label:"个数"}},[t.order.confirmed_at?n("span",[t._v(t._s(t.form.count))]):n("el-input",{ref:t.form.count,refInFor:!0,model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"耗材(cm)"}},[n("span",[t._v(t._s(""+t.form.width))])]),t._v(" "),n("el-form-item",[t.order.confirmed_at?t._e():n("el-button",{attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return t.onSubmit(e)}}},[t._v("保存")])],1)],2)],1)})),1)],1)},o=[],a=n("f8b7"),i=(n("71fa"),{data:function(){return{form:{lengths:{},count:"",width:""},order:{oid:"",recipient_information:"",sofa:{},sofa_item:{},note:"",ods:{}},designs:[{id:0}],activeDesign:{},rules:{lengths:[{required:!0,trigger:"blur",message:"边长必填"}],count:[{required:!0,trigger:"blur",message:"个数必填"}]},loading:!1,activeIndex:"index0"}},computed:{id:function(){return this.$route.params.id}},mounted:function(){var t=this;Object(a["d"])(this.id).then((function(e){var n=e.data;t.order=n,t.designs=n.sofa.designs,t.activeDesign=n.sofa.designs[0],t.freshDesign()}))},methods:{handleClick:function(t,e){this.activeDesign=t.$attrs.design,this.freshDesign()},freshDesign:function(){var t=this;Object(a["e"])(this.id,this.activeDesign.id).then((function(e){var n=e.data;t.form.lengths=n.lengths||{},t.form.count=n.count||"",t.form.width=n.width||""}))},onSubmit:function(){for(var t=this,e=0;e<this.activeDesign.types.length;e++){var n=this.activeDesign.types[e];if(!this.form.lengths[n])return this.$message.error("".concat(n,"必须填写"))}if(!(this.form.count>=0))return this.$message.error("个数必须填写");this.loading=!0,Object(a["h"])(this.id,this.activeDesign.id,this.form).then((function(e){t.$message("保存成功"),t.loading=!1;var n=e.data;t.form.lengths=n.lengths||{},t.form.count=n.count||"",t.form.width=n.width||""})).catch((function(e){console.log(e),t.loading=!1}))}}}),c=i,s=(n("54fb"),n("2877")),u=Object(s["a"])(c,r,o,!1,null,"d4e646a0",null);e["default"]=u.exports},f8b7:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"g",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return d})),n.d(e,"h",(function(){return f}));var r=n("b775");function o(t){return Object(r["a"])({url:"order?".concat(t),method:"get"})}function a(t){return Object(r["a"])({url:"order/".concat(t),method:"get"})}function i(t){return Object(r["a"])({url:"order",method:"post",data:t})}function c(t,e){return Object(r["a"])({url:"order/".concat(t,"/update"),method:"post",data:e})}function s(t){return Object(r["a"])({url:"order/".concat(t,"/delete"),method:"post"})}function u(t){return Object(r["a"])({url:"order/".concat(t,"/confirm"),method:"post"})}function d(t,e){return Object(r["a"])({url:"order/".concat(t,"/design/").concat(e),method:"get"})}function f(t,e,n){return Object(r["a"])({url:"order/".concat(t,"/design/").concat(e,"/update"),method:"post",data:n})}}}]);